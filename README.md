# Discourse 项目倒计时插件

一个功能完整的项目倒计时管理工具，帮助Discourse论坛用户跟踪和管理项目截止日期。

## 功能特性

- ✅ **项目管理**: 添加、编辑、删除项目
- ✅ **倒计时显示**: 实时显示剩余天数和状态
- ✅ **智能状态**: 根据剩余时间自动标识紧急程度
- ✅ **重要项目**: 标记和筛选重要项目
- ✅ **多种排序**: 按天数、名称、日期等多种方式排序
- ✅ **关键词筛选**: 支持多关键词模糊搜索
- ✅ **过期项目**: 单独显示已过期项目
- ✅ **数据持久化**: 用户数据安全存储在Discourse数据库
- ✅ **响应式设计**: 完美适配移动端和桌面端
- ✅ **主题兼容**: 自动适配Discourse主题样式
- ✅ **国际化**: 支持中英文界面

## 状态说明

项目根据剩余天数自动显示不同状态：

- 🟢 **正常**: 剩余15天以上
- 🟡 **注意**: 剩余8-14天
- 🟠 **警告**: 剩余4-7天
- 🔴 **紧急**: 剩余1-3天
- ⚫ **已过期**: 已超过截止日期

## 安装方法

### 1. 通过Git仓库安装（推荐）

1. 将此插件上传到您的GitHub仓库
2. 在Discourse管理后台，进入 **管理 → 插件**
3. 点击"安装插件"，输入您的GitHub仓库地址：
```
https://github.com/tyf2018/discourse-project-countdown
```

4. 点击"安装"并等待安装完成
5. 重启Discourse实例

### 2. 手动安装

1. 将插件文件夹复制到Discourse安装目录的 `plugins/` 文件夹下
2. 重命名为 `discourse-project-countdown`
3. 重启Discourse实例

## 配置设置

安装完成后，在管理后台可以配置以下选项：

- **启用项目倒计时功能**: 全局开关（默认启用）
- **在顶部显示**: 是否在论坛顶部导航显示（默认关闭）
- **每用户最大项目数**: 限制用户可创建的项目数量（默认50个）

## 使用方法

### 访问项目倒计时

1. **通过导航菜单**: 在论坛顶部导航找到"项目倒计时"
2. **通过用户菜单**: 点击头像 → 用户菜单 → "项目倒计时"
3. **直接访问**: 访问 `/project-countdown` 页面

### 管理项目

1. **添加项目**:
   - 输入项目名称
   - 选择截止日期
   - 可选标记为"关注项目"
   - 点击"添加"按钮

2. **编辑项目**:
   - 点击项目卡片上的"编辑"按钮
   - 修改信息后点击"保存"

3. **删除项目**:
   - 点击项目卡片上的"删除"按钮
   - 确认删除操作

4. **筛选和排序**:
   - 使用顶部筛选框搜索项目（支持多关键词）
   - 勾选"关注"仅显示重要项目
   - 点击标题切换排序方式

## 数据安全

- 所有项目数据存储在Discourse数据库的用户自定义字段中
- 数据与用户账户绑定，安全可靠
- 支持Discourse的备份和恢复机制
- 用户之间的数据完全隔离

## 浏览器兼容

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+
- 移动端浏览器

## 技术栈

- **前端**: Ember.js + Handlebars
- **样式**: SCSS (兼容Discourse主题)
- **后端**: Ruby on Rails (Discourse API)
- **数据存储**: Discourse用户自定义字段

## 版本要求

- Discourse 3.0.0 或更高版本
- Ruby 3.0+
- 推荐使用最新稳定版Discourse

## 故障排除

### 插件未显示
1. 检查插件是否正确安装在 `plugins/discourse-project-countdown/` 目录
2. 确认已重启Discourse实例
3. 检查管理后台中插件是否启用

### 数据无法保存
1. 检查用户是否已登录
2. 确认数据库权限正常
3. 查看浏览器控制台是否有错误信息

### 样式显示异常
1. 清除浏览器缓存
2. 检查是否与其他插件或主题冲突
3. 尝试切换到默认主题测试

## 开发和贡献

### 本地开发

1. Fork此仓库
2. 在Discourse开发环境中安装插件
3. 修改代码并测试
4. 提交Pull Request

### 文件结构

```
discourse-project-countdown/
├── plugin.rb                     # 插件定义和后端逻辑
├── config/
│   ├── settings.yml              # 站点设置
│   └── locales/                  # 国际化文件
├── assets/
│   ├── javascripts/discourse/    # 前端JS代码
│   └── stylesheets/              # CSS样式
└── README.md                     # 说明文档
```

## 更新日志

### v1.0.0 (2024-01-XX)
- 初始版本发布
- 实现完整的项目倒计时功能
- 支持中英文界面
- 移动端优化
- 数据持久化

## 许可证

本插件基于 MIT 许可证开源。

## 支持

如有问题或建议，请：

1. 查看 [GitHub Issues](https://github.com/your-username/discourse-project-countdown/issues)
2. 提交新的Issue描述问题
3. 在Discourse社区论坛寻求帮助


---


**Made with ❤️ for Discourse Community**

